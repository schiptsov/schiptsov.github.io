<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2023-07-01 Sat 19:36 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Testing</title>
<meta name="author" content="&lt;schiptsov@gmail.com&gt;" />
<meta name="description" content="Testing for a Functional Programmer" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="preconnect" href="https://fonts.googleapis.com">

<link href="https://fonts.googleapis.com/css?family=Fira Sans" rel="stylesheet">

<link href="https://fonts.googleapis.com/css?family=Fira Code" rel="stylesheet">

<link rel='stylesheet' type='text/css' href='/css/main.css'/>
<script>
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
// @license-end
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="content" class="content">
<header>
<h1 class="title">Testing</h1>
</header><p>
~“Program testing can be used to show the presence of bugs, but never to show their absence!”/
</p>

<p>
― Edsger W. Dijkstra~
</p>

<p>
Every serious discussion about testing absolutely must begin with this
quote. It is like <i>priming</i> of a religious ritual.
</p>

<p>
It also captures the essence of software engineering - that complexity is so overwhelming
that we <i>cannot even know how many bugs are there</i> at any given moment.
</p>

<div id="outline-container-org0865d62" class="outline-2">
<h2 id="org0865d62">How</h2>
<div class="outline-text-2" id="text-org0865d62">
<p>
Write everything down. The visual system is the most powerful. It will prime the
brain better.
Write down examples (<i>expectations</i>) of what a function does in a &ldquo;corner cases&rdquo;
(especially &ldquo;empty&rdquo; or &ldquo;nothing&rdquo;), to <i>check</i> your expectations.
Write these as <i>unit-tests</i> - particular <i>assertions</i> (statements of fact).
Then write down as distinct <i>assertions</i> (tests) the <i>specification</i> (equations) which states the &ldquo;laws&rdquo; and
<i>invariants</i> - the <i>equation reasoning</i> at work.
This is how a non-bullshit TTD meets a poor-man&rsquo;s <i>executable specs</i> in a
systematic program design (of Kiczales).
</p>
</div>
</div>

<div id="outline-container-org904853e" class="outline-2">
<h2 id="org904853e">Why</h2>
<div class="outline-text-2" id="text-org904853e">
<p>
A modern aeroplane performs a <i>self-test</i> before a takeoff to check if
anything broken <i>since last landing</i>. Pure rationality.
</p>

<p>
One ask <i>other people</i> to modify your code. How do you know they did not
break anything? At least a <i>self-test</i> should pass.
</p>

<p>
Everyone thinks that he is smarter than &ldquo;other people&rdquo;, so he will not
break the code. This is a <i>naive selfish bias</i> and it means that one
must <i>double-check</i> everything after every change.
</p>

<p>
A static type checking of a strongly typed language (ML family) is the
first line of testing (it catches <i>inconsistencies</i> at a type level).
</p>

<p>
Defensive programming (checking <i>preconditions</i> with assertions) is the
second.
</p>

<p>
Static typing + <i>sum-types</i> + testing frameworks will make modification
easier and more confident. Modifications, including by other people, are
essential.
</p>
</div>
</div>
<div id="outline-container-org252d181" class="outline-2">
<h2 id="org252d181">The law of big numbers</h2>
<div class="outline-text-2" id="text-org252d181">
<p>
There is, however, &ldquo;natural experiments&rdquo; (exactly as they occur in
Nature) which could give us <i>some</i> confidence. This, by the way, is the
same heuristic which allow animals to avoid poisonous foods or water.
</p>

<p>
When, lets say, a certain version of <code>clang</code> is used to compile
produce official builds (available for millions to download) of vastly
complex project such as Google Chrome and the traffic of bug-repports is
low and has no mentioning of <i>segfaults</i>, we may conclude that this
particular versions of <code>clang</code> is correct and stable?
</p>

<p>
How so? Because even if we obviously cannot do proper coverage testing
for each an every code path (which won&rsquo;t be enough anyway) millions of
users go through these code patches eventually. If there is no complains
then we could assume that not just browser itself, but the underlying
compiler works well.
</p>

<p>
This is a hypothetical example, but it can be generalized very well.
Find out the most common distro on major public cloud platforms (that
would be some or another version <i>Ubuntu</i>) and you will see <i>a stable set
of packages with dependencies resolved</i>. The particular version of the
Linux kernel together with a set of applied vendor patches. Compiler,
used to build this kernel for the most common architecture (with default
optimizations), etc.
</p>

<p>
This is how testing works. It is the same notion as number of hours
certain model of an aircraft flew so far. It does not guarantee
anything, but it shows that the designs and implementations are stable.
</p>
</div>
</div>

<div id="outline-container-org5c49815" class="outline-2">
<h2 id="org5c49815">Formal verification</h2>
<div class="outline-text-2" id="text-org5c49815">
<p>
One definitely would not try to formally verify all ones code, even in a
pure functional language - it is just too much time consuming and too
much of highly focused effort (you math must be solid, otherwise it is
waste of time).
</p>

<p>
There is, however, a <i>poorman&rsquo;s formalism</i> that comes for free, provided
you know what you do.
</p>

<p>
Haskell has some set of unique properties which qualifies it as <i>a system
of logic</i>. Its <i>intermediate representation</i> or IR <i>is</i> an actual
implementation  of the <i>System F Omega</i> (which is a system of logic).
</p>

<p>
Being <i>pure</i> it has certain properties, such as its expression could be
evaluated mechanically with a paper and pencil by pure substitution
(enhanced with the notion of <i>frames of environment</i>). It is as pure as
algebra of polynomials (or any algebra).
</p>

<p>
When one expresses one&rsquo;s <i>problem domain</i> and related <i>domain logic</i>
(yes, DDD and TTD) in <i>pure</i> Haskell one will produce as set of pure
expressions which, after type-checking and testing using specialized
frameworks, will be weakly verified (remember, Haskell, and logic, are
purely <i>declarative</i> and <i>timeless</i> - once a pattern is captured it is
valid forever).
</p>

<p>
So, write your logic in Haskell, it will also be an order of magnitude
less LOC, if you know what you do and reduce everything to the most
fundamental forms (data dominates!)and related standard idioms.
</p>

<p>
.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: &lt;schiptsov@gmail.com&gt;</p>
<p class="email">Email: <a href="mailto:lngnmn2@yahoo.com">lngnmn2@yahoo.com</a></p>
<p class="date">Created: 2023-07-01 Sat 19:36</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.0.92 (<a href="https://orgmode.org">Org</a> mode 9.6.1)</p>
</div>
</body>
</html>